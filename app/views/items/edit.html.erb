<h1 class="text-xl px-2 py-2">編輯項目 Edit Item</h1>

<div class="mx-5 my-5">
  <%= form_with(model: @item, url: @item, local: true) do |f|%>
    <%= f.label :name, "項目名稱"%>
    <%= f.text_field :name, class: 'border-2 px-2 py-3', autocomplete:"off" %>
    <%= f.label :description, "項目敘述" %>
    <%= f.text_area :description, class: 'border-2 px-2 py-3' %>
    <%= f.label :person, "負責人" %>
      <%#= 都沒選的時候，就不會有這個欄位送到rails後端，所以要存在這個欄位，而且要送permit白名單 %>      
    <%= hidden_field_tag "#{f.object_name}[user_ids][]", '' %>
    <% @workspace_users.each do |member| %>
      <%#= 把目前已經被打勾的assignee，找出來 %>  
      <%= check_box_tag "person[#{member.id}]", member.id, @item_user_ids.include?(member.id) %>
      <%= label_tag("person[#{member.id}]", member.display_name) %>
    <% end %>
    <%= f.label :due_date, "期限" %>
    <%= f.date_field :due_date, class: 'border-2 px-2 py-3' %>
    <%= f.label :status, "狀態" %>
    <%= f.select :status, %w(待指派 進行中 卡關中 待修改 已完成) %>
    <%= f.submit '編輯完成', class: 'mt-4 ml-2 px-3 py-1 bg-orange-400 text-white block w-32 rounded text-center' %>
  <% end %>

  <%= link_to '刪除項目', item_path(@item.id), method: 'delete', data: {confirm: '您確定要刪除這個項目嗎?'}, class: "delete-link mt-4 ml-2 px-3 py-1 bg-red-500 block w-32 text-white rounded text-center"%>
</div>